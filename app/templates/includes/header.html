<header
  class="navbar navbar-expand-md navbar-light bg-white border-bottom px-3 px-md-4"
>
  <div class="container-fluid">
    <button
      id="mobile-menu-button"
      class="btn btn-outline-secondary d-md-none me-2"
    >
      <i class="fas fa-bars"></i>
    </button>

    <a href="/" class="navbar-brand fw-bold tracking-tight">
      TestLoginEtc・・・
    </a>

    <div class="ms-auto d-flex align-items-center">
      {% if user %}
      <div class="dropdown">
        <button
          class="btn btn-link p-0 text-decoration-none dropdown-toggle d-flex align-items-center justify-content-center border-0 shadow-none no-caret"
          type="button"
          id="userDropdown"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
          <div
            class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center shadow-sm"
            style="width: 40px; height: 40px"
          >
            <span class="fw-bold"
              >{{ (user.name if user.name else user.email)[0] | upper }}</span
            >
          </div>
        </button>

        <ul
          class="dropdown-menu dropdown-menu-end shadow border-0 mt-2"
          aria-labelledby="userDropdown"
        >
          <li
            class="px-3 py-2 text-muted border-bottom mb-1 small text-truncate"
            style="max-width: 200px"
          >
            {{ user.name if user.name else user.email }}
          </li>
          <li>
            <a class="dropdown-item" href="/profile"
              ><i class="fas fa-user me-2"></i>Profile</a
            >
          </li>
          <li><hr class="dropdown-divider" /></li>
          <li>
            <a
              class="dropdown-item text-danger"
              href="/logout"
              onclick="confirmLogout(event)"
            >
              <i class="fas fa-sign-out-alt me-2"></i>Logout
            </a>
          </li>
        </ul>
      </div>
      {% else %}
      <a href="/login" class="btn btn-primary btn-sm px-3">Login</a>
      {% endif %}
    </div>
  </div>
</header>

<style>
  /* ドロップダウンの矢印を消す（DaisyUIの見た目に寄せる） */
  .no-caret::after {
    display: none !important;
  }
  .navbar-brand {
    font-size: 1.25rem;
  }
</style>
